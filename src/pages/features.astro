---
import Layout from '../layouts/Layout.astro';
import Button from '../components/ui/Button.astro';
import Card from '../components/ui/Card.astro';
import Badge from '../components/ui/Badge.astro';
import { getLocale, loadTranslations, t } from '../i18n/utils';
import type { Language } from '../i18n/config';

const locale: Language = getLocale(Astro.currentLocale);
await loadTranslations(locale);

const featureCategories = [
  {
    name: t('features.categories.ai.name', locale),
    icon: 'ü§ñ',
    description: t('features.categories.ai.description', locale),
    features: [
      {
        title: t('features.categories.ai.feature_1_title', locale),
        description: t('features.categories.ai.feature_1_description', locale),
      },
      {
        title: t('features.categories.ai.feature_2_title', locale),
        description: t('features.categories.ai.feature_2_description', locale),
      },
      {
        title: t('features.categories.ai.feature_3_title', locale),
        description: t('features.categories.ai.feature_3_description', locale),
      },
    ],
  },
  {
    name: t('features.categories.mls.name', locale),
    icon: 'üîÑ',
    description: t('features.categories.mls.description', locale),
    features: [
      {
        title: t('features.categories.mls.feature_1_title', locale),
        description: t('features.categories.mls.feature_1_description', locale),
      },
      {
        title: t('features.categories.mls.feature_2_title', locale),
        description: t('features.categories.mls.feature_2_description', locale),
      },
      {
        title: t('features.categories.mls.feature_3_title', locale),
        description: t('features.categories.mls.feature_3_description', locale),
      },
    ],
  },
  {
    name: t('features.categories.compliance.name', locale),
    icon: '‚úì',
    description: t('features.categories.compliance.description', locale),
    features: [
      {
        title: t('features.categories.compliance.feature_1_title', locale),
        description: t('features.categories.compliance.feature_1_description', locale),
      },
      {
        title: t('features.categories.compliance.feature_2_title', locale),
        description: t('features.categories.compliance.feature_2_description', locale),
      },
      {
        title: t('features.categories.compliance.feature_3_title', locale),
        description: t('features.categories.compliance.feature_3_description', locale),
      },
    ],
  },
  {
    name: t('features.categories.team.name', locale),
    icon: 'üë•',
    description: t('features.categories.team.description', locale),
    features: [
      {
        title: t('features.categories.team.feature_1_title', locale),
        description: t('features.categories.team.feature_1_description', locale),
      },
      {
        title: t('features.categories.team.feature_2_title', locale),
        description: t('features.categories.team.feature_2_description', locale),
      },
      {
        title: t('features.categories.team.feature_3_title', locale),
        description: t('features.categories.team.feature_3_description', locale),
      },
    ],
  },
];

const integrations = [
  { name: 'Funda', logo: 'üè†', category: 'MLS' },
  { name: 'Idealista', logo: 'üè°', category: 'MLS' },
  { name: 'Kyero', logo: 'üèòÔ∏è', category: 'MLS' },
  { name: 'Fotocasa', logo: 'üè¢', category: 'MLS' },
  { name: 'Gmail', logo: 'üìß', category: 'Email' },
  { name: 'Outlook', logo: 'üì®', category: 'Email' },
  { name: 'WhatsApp', logo: 'üí¨', category: 'Messaging' },
  { name: 'Slack', logo: 'üíº', category: 'Collaboration' },
  { name: 'Zapier', logo: '‚ö°', category: 'Automation' },
  { name: 'Google Calendar', logo: 'üìÖ', category: 'Calendar' },
  { name: 'Mailchimp', logo: 'üì¨', category: 'Marketing' },
  { name: 'HubSpot', logo: 'üéØ', category: 'CRM' },
];

const comparison = [
  {
    feature: 'AI Lead Scoring',
    tesoro: true,
    competitor1: false,
    competitor2: true,
  },
  {
    feature: 'MLS Integraties (5+)',
    tesoro: true,
    competitor1: true,
    competitor2: false,
  },
  {
    feature: 'GDPR Compliance Dashboard',
    tesoro: true,
    competitor1: false,
    competitor2: false,
  },
  {
    feature: 'Team Collaboration Tools',
    tesoro: true,
    competitor1: true,
    competitor2: true,
  },
  {
    feature: 'Mobile App (iOS + Android)',
    tesoro: true,
    competitor1: true,
    competitor2: false,
  },
  {
    feature: 'API Access',
    tesoro: true,
    competitor1: false,
    competitor2: true,
  },
  {
    feature: 'White Label Optie',
    tesoro: true,
    competitor1: false,
    competitor2: false,
  },
  {
    feature: '24/7 Support',
    tesoro: true,
    competitor1: false,
    competitor2: true,
  },
];
---

<Layout 
  title={t('meta.features_title', locale)}
  description={t('meta.features_description', locale)}
>
  <!-- Hero Section -->
  <section class="bg-gradient-to-br from-neutral-50 to-white py-16 lg:py-24">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl text-center">
      <Badge variant="primary" size="md" class="mb-6">
        {t('features.hero.badge', locale)}
      </Badge>
      
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-display font-bold text-neutral-900 mb-6">
        {t('features.hero.title', locale)}
      </h1>
      
      <p class="text-lg sm:text-xl text-neutral-700 mb-8 max-w-3xl mx-auto">
        {t('features.hero.description', locale)}
      </p>

      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button variant="primary" size="lg" href="/signup">
          {t('cta.trial', locale)}
        </Button>
        <Button variant="outline" size="lg" href="/demo">
          {t('cta.demo', locale)}
        </Button>
      </div>
    </div>
  </section>

  <!-- Feature Categories -->
  {featureCategories.map((category, index) => (
    <section class={`py-16 lg:py-24 ${index % 2 === 0 ? 'bg-white' : 'bg-neutral-50'}`}>
      <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
        <div class={`grid grid-cols-1 lg:grid-cols-2 gap-12 items-center ${index % 2 === 1 ? 'lg:flex-row-reverse' : ''}`}>
          <div class={index % 2 === 1 ? 'lg:order-2' : ''}>
            <div class="text-6xl mb-6">{category.icon}</div>
            <h2 class="text-3xl lg:text-4xl font-display font-bold text-neutral-900 mb-4">
              {category.name}
            </h2>
            <p class="text-lg text-neutral-700 mb-8">
              {category.description}
            </p>
            <Button variant="outline" href="/signup">
              Probeer Gratis
            </Button>
          </div>
          
          <div class={index % 2 === 1 ? 'lg:order-1' : ''}>
            <div class="space-y-4">
              {category.features.map((feature) => (
                <Card variant="default" padding="lg">
                  <h3 class="text-xl font-semibold text-neutral-900 mb-2">
                    {feature.title}
                  </h3>
                  <p class="text-neutral-700">
                    {feature.description}
                  </p>
                </Card>
              ))}
            </div>
          </div>
        </div>
      </div>
    </section>
  ))}

  <!-- Integrations Section -->
  <section class="py-16 lg:py-24 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
      <div class="text-center mb-16">
        <h2 class="text-3xl lg:text-4xl font-display font-bold text-neutral-900 mb-4">
          Integraties met je favoriete tools
        </h2>
        <p class="text-lg text-neutral-700 max-w-2xl mx-auto">
          {t('features_page.integrations_title', locale)}
        </p>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6 mb-12">
        {integrations.map((integration) => (
          <Card variant="default" padding="md" class="text-center hover:shadow-lg transition-shadow">
            <div class="text-4xl mb-2">{integration.logo}</div>
            <div class="font-semibold text-sm text-neutral-900">{integration.name}</div>
            <div class="text-xs text-neutral-700">{integration.category}</div>
          </Card>
        ))}
      </div>

      <div class="text-center">
        <p class="text-neutral-700 mb-4">Mis je een integratie?</p>
        <Button variant="outline" href="/contact">
          Vraag een Integratie Aan
        </Button>
      </div>
    </div>
  </section>

  <!-- Comparison Matrix -->
  <section class="py-16 lg:py-24 bg-neutral-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl">
      <div class="text-center mb-16">
        <h2 class="text-3xl lg:text-4xl font-display font-bold text-neutral-900 mb-4">
          {t('features_page.comparison_title', locale)}
        </h2>
        <p class="text-lg text-neutral-700 max-w-2xl mx-auto">
          {t('features_page.comparison_subtitle', locale)}
        </p>
      </div>

      <div class="overflow-x-auto">
        <table class="w-full bg-white rounded-xl shadow-sm">
          <thead>
            <tr class="border-b border-neutral-200">
              <th class="text-left p-4 font-semibold text-neutral-900">Feature</th>
              <th class="p-4 font-semibold text-primary">{t('features_page.comparison_tesoro', locale)}</th>
              <th class="p-4 font-semibold text-neutral-700">{t('features_page.comparison_competitor_a', locale)}</th>
              <th class="p-4 font-semibold text-neutral-700">{t('features_page.comparison_competitor_b', locale)}</th>
            </tr>
          </thead>
          <tbody>
            {comparison.map((row, index) => (
              <tr class={index % 2 === 0 ? 'bg-neutral-50' : 'bg-white'}>
                <td class="p-4 text-neutral-900">{row.feature}</td>
                <td class="p-4 text-center">
                  {row.tesoro ? (
                    <span class="text-success text-2xl">‚úì</span>
                  ) : (
                    <span class="text-neutral-300 text-2xl">‚úó</span>
                  )}
                </td>
                <td class="p-4 text-center">
                  {row.competitor1 ? (
                    <span class="text-success text-2xl">‚úì</span>
                  ) : (
                    <span class="text-neutral-300 text-2xl">‚úó</span>
                  )}
                </td>
                <td class="p-4 text-center">
                  {row.competitor2 ? (
                    <span class="text-success text-2xl">‚úì</span>
                  ) : (
                    <span class="text-neutral-300 text-2xl">‚úó</span>
                  )}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      <div class="text-center mt-12">
        <Button variant="primary" size="lg" href="/signup">
          {t('features_page.final_cta_title', locale)}
        </Button>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="bg-gradient-to-r from-primary to-primary-accent text-white py-16 lg:py-24">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl text-center">
      <h2 class="text-3xl lg:text-4xl font-display font-bold mb-6">
        Klaar om je workflow te automatiseren?
      </h2>
      <p class="text-lg text-white/90 mb-8 max-w-2xl mx-auto">
        {t('features_page.final_cta_description', locale)}
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <Button variant="secondary" size="lg" href="/signup">
          {t('cta.trial', locale)}
        </Button>
        <Button variant="ghost" size="lg" href="/pricing" class="border-2 border-white hover:bg-white hover:text-primary">
          Bekijk Prijzen
        </Button>
      </div>
    </div>
  </section>
</Layout>
